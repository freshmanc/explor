
\section{DvmAsm for test-1}
\begin{verbatim}
compile_time  txt "Sunday, April 03 at 07:27 PM"
\end{verbatim}

\subsection{Externals}
\begin{verbatim}
ext_dvm_empty_text  ext "dvm_empty_text"
ext_dvm_discard_text  ext "dvm_discard_text"
ext_dvm_insert_char  ext "dvm_insert_char"
ext_dvm_extract_char  ext "dvm_extract_char"
ext_dvm_insert_text  ext "dvm_insert_text"
ext_dvm_extract_text  ext "dvm_extract_text"
ext_dvm_text_bool  ext "dvm_text_bool"
ext_dvm_text_int  ext "dvm_text_int"
ext_dvm_text_real  ext "dvm_text_real"
ext_dvm_text_cat  ext "dvm_text_cat"
ext_dvm_text_copy  ext "dvm_text_copy"
ext_dvm_cf_text  ext "dvm_cf_text"
\end{verbatim}

\subsection{Real constants}
\begin{verbatim}
\end{verbatim}

\subsection{Text constants}
\begin{verbatim}
text0    txt "p"
\end{verbatim}

\subsection{Allocations}

\subsubsection{Allocations for main}
\begin{verbatim}
main_name  txt "program entry"
main_source  txt "test-1.tex"
MainWords  equ 0
\end{verbatim}

\subsubsection{Allocations for proc\_VendingMachine}
\begin{verbatim}
proc_VendingMachine_name  txt "process VendingMachine"
proc_VendingMachine_source  txt "test-1.tex"
Proc_VendingMachineWords  equ 14
\end{verbatim}

\subsubsection{Allocations for proc\_Customer}
\begin{verbatim}
proc_Customer_name  txt "process Customer"
proc_Customer_source  txt "test-1.tex"
Proc_CustomerWords  equ 2
\end{verbatim}

\subsubsection{Allocations for cell\_Main}
\begin{verbatim}
cell_Main_name  txt "cell Main"
cell_Main_source  txt "test-1.tex"
Cell_MainWords  equ 2
\end{verbatim}

\subsection{Components}

\subsubsection{Definition of main}
\begin{verbatim}
         com "program entry"
main     enterPrc main_source main_name 35
%invocation of Main
         newPrc cell_Main Cell_MainWords
         launchPrc ax
_exit    nix
         exitPrc
         end
         stk 0
\end{verbatim}

\subsubsection{Definition of proc\_VendingMachine}
\begin{verbatim}
         com "process VendingMachine"
proc_VendingMachine  enterPrc proc_VendingMachine_source proc_VendingMachine_name 4
% Proc_VendingMachine_I_p 
% Proc_VendingMachine_T_1 
% Proc_VendingMachine_T_2 
% Proc_VendingMachine_T_3 
% Proc_VendingMachine_T_4 
% Proc_VendingMachine_T_5 
% Proc_VendingMachine_T_6 
%cpy data 2021 word 0
         mvw [bp + PrcVar + 1*BpV] 0 
%line word 7
         mvw [bp + SRC_LINE] 7
%lbl addr 2027
_2027  nix
%rsig data 1708 word 0
         receive_signal PrcVar+0*BpV 0  
%line word 8
         mvw [bp + SRC_LINE] 8
%cpy data 2046 word 2
         mvw [bp + PrcVar + 2*BpV] 2 
%cpy data 2048 data 2046
         mvw [bp + PrcVar + 3*BpV] [bp + PrcVar + 2*BpV] 
%lbl addr 2041
_2041  nix
%add data 2046 data 2046 word 1
         mvw ax [bp + PrcVar + 2*BpV]  
         add ax 1  
         mvw [bp + PrcVar + 2*BpV] ax  
%rem data 2046 data 2046 word 3
         mvw ax [bp + PrcVar + 2*BpV]  
         mod ax 3  
         mvw [bp + PrcVar + 2*BpV] ax  
%jtb data 2046 addr 2043 addr 2044 addr 2045
         mvw ax [bp + PrcVar + 2*BpV] 
         jmx ax _2043 _2044 _2045  
%line word 10
         mvw [bp + SRC_LINE] 10
%lbl addr 2043
_2043  nix
%nrqy data 2063 data 1708 word 1
         mvw ax [bp + PrcVar + 0*BpV]      
         mvw bx 1      
         port_ready WRITERS  
         mvw [bp + PrcVar + 4*BpV] bx      
%jf addr 2036 data 2063
         mzb ax [bp + PrcVar + 4*BpV]  
         cmp ax 0    
         jeq _2036      
%line word 10
         mvw [bp + SRC_LINE] 10
%rsig data 1708 word 1
         receive_signal PrcVar+0*BpV 1  
%ja addr 2037
         jmp _2037  
%lbl addr 2044
_2044  nix
%nrqy data 2075 data 1708 word 3
         mvw ax [bp + PrcVar + 0*BpV]      
         mvw bx 3      
         port_ready WRITERS  
         mvw [bp + PrcVar + 5*BpV] bx      
%jf addr 2036 data 2075
         mzb ax [bp + PrcVar + 5*BpV]  
         cmp ax 0    
         jeq _2036      
%line word 11
         mvw [bp + SRC_LINE] 11
%rsig data 1708 word 3
         receive_signal PrcVar+0*BpV 3  
%ja addr 2037
         jmp _2037  
%lbl addr 2045
_2045  nix
%nrqy data 2087 data 1708 word 2
         mvw ax [bp + PrcVar + 0*BpV]      
         mvw bx 2      
         port_ready WRITERS  
         mvw [bp + PrcVar + 6*BpV] bx      
%jf addr 2036 data 2087
         mzb ax [bp + PrcVar + 6*BpV]  
         cmp ax 0    
         jeq _2036      
%line word 12
         mvw [bp + SRC_LINE] 12
%rsig data 1708 word 2
         receive_signal PrcVar+0*BpV 2  
%ja addr 2037
         jmp _2037  
%lbl addr 2036
_2036  nix
%jne addr 2041 data 2046 data 2048
         mvw ax [bp + PrcVar + 2*BpV]  
         cmp ax [bp + PrcVar + 3*BpV]  
         jne _2041      
%wait
         inv yield_me        
%ja addr 2041
         jmp _2041  
%lbl addr 2037
_2037  nix
%cpy data 2021 data 2046
         mvw [bp + PrcVar + 1*BpV] [bp + PrcVar + 2*BpV] 
%ja addr 2027
         jmp _2027  
_exit    nix
         exitPrc
         end
         stk 28
\end{verbatim}

\subsubsection{Definition of proc\_Customer}
\begin{verbatim}
         com "process Customer"
proc_Customer  enterPrc proc_Customer_source proc_Customer_name 18
% Proc_Customer_I_p 
%line word 20
         mvw [bp + SRC_LINE] 20
%ssig data 1742 word 0
         send_signal PrcVar+0*BpV 0  
%line word 22
         mvw [bp + SRC_LINE] 22
%ssig data 1742 word 2
         send_signal PrcVar+0*BpV 2  
_exit    nix
         exitPrc
         end
         stk 4
\end{verbatim}

\subsubsection{Definition of cell\_Main}
\begin{verbatim}
         com "cell Main"
cell_Main  enterPrc cell_Main_source cell_Main_name 28
% Cell_Main_C_p 
%crtp data 1773 word 5 text 0
         newChn 5 pp   
         mvw [bp + PrcVar + 0*BpV] ax      
%line word 31
         mvw [bp + SRC_LINE] 31
%invocation of VendingMachine
         newPrc proc_VendingMachine Proc_VendingMachineWords
         mvw [ax + PrcVar + 0*BpV] [bp + PrcVar + 0*BpV] 
         connectChn [ax + PrcVar + 0*BpV] ax 
         launchPrc ax
%line word 32
         mvw [bp + SRC_LINE] 32
%invocation of Customer
         newPrc proc_Customer Proc_CustomerWords
         mvw [ax + PrcVar + 0*BpV] [bp + PrcVar + 0*BpV] 
         connectChn [ax + PrcVar + 0*BpV] ax 
         launchPrc ax
_exit    nix
         exitPrc
         end
         stk 4
\end{verbatim}
